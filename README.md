# PicoPixel

PicoPixelは、Pyxelを用いた8bitスタイルの音楽シーケンサーです。シンプルな操作で、レトロなチップチューンを作成することができます。

## 機能

### バージョン2.0の主な機能
- 4トラック構成（同時に4つの音を鳴らせる）
- トラック切り替え機能
- トラックごとの音量調整
- ソングモード（複数のパターンを組み合わせて曲を作成）
- パターン管理（最大16パターン）
- パターンチェイン（パターンの連続再生）
- 各トラックに固定の音色を割り当て：
  - トラック1: Triangle（三角波）
  - トラック2: Square（矩形波）
  - トラック3: Pulse（パルス波）
  - トラック4: Noise（ノイズ）

### 基本機能
- 16ステップシーケンス
- 全音階入力（半音を含む12音階）
- オクターブ変更機能（0-4）
- キーボード＆ゲームパッド操作対応
- 再生・停止機能
- テンポ変更機能（60-240 BPM）

## インストール方法

1. 必要なパッケージをインストールします：

```bash
uv pip install -r requirements.txt
```

2. アプリケーションを起動します：

```bash
uv run picopyxel/main.py
```

## 実機転送方法

実機（Powkiddy RGB30など）にアプリケーションを転送するには、以下の手順に従ってください。

### 1. 実行権限の付与

まず、デプロイスクリプトに実行権限を付与します：

```bash
chmod +x deploy.sh
```

### 2. デプロイの実行

以下のコマンドを実行して、パッケージを作成し実機に転送します：

```bash
./deploy.sh
```

デフォルトでは、以下の設定が使用されます：
- パッケージ名: picopyxel
- Pythonファイル: picopyxel/main.py
- ホスト: plumOS-RN
- パスワード: plum

カスタム設定を使用する場合は、引数を指定できます：

```bash
./deploy.sh <パッケージ名> <Pythonファイルパス> <ホスト> <パスワード>
```

例：
```bash
./deploy.sh mygame mygame/game.py 192.168.1.100 mypassword
```

### 3. 実機での実行

転送が完了したら、実機でPyxelランチャーを起動し、転送したアプリケーションを選択して実行してください。

## 操作方法

### モード
- **パターン編集モード**: 音階の入力や編集を行うモード
- **ソング編集モード**: パターンを組み合わせて曲を作成するモード
- **トラック設定モード**: トラックの音量などを設定するモード

### キーボード操作

#### 共通操作
- **スペースキー**: 再生/停止の切り替え
- **Tabキー**: モード切り替え（パターン編集/ソング編集/トラック設定）
- **[と]キー**: トラック切り替え
- **,と.キー**: パターン切り替え
- **H/Lキー**: テンポ変更
- **Sキー**: ソングモード切り替え
- **ESC**: アプリケーション終了

#### パターン編集モード
- **矢印キー（左右）**: ステップ選択
- **矢印キー（上下）**: 音階選択（C, C#, D, D#, E, F, F#, G, G#, A, A#, B）
- **PageUp/PageDown（PgUp/PgDn）**: オクターブ変更
- **Enterキー**: 選択中の音階を入力
- **DEL/Backspace**: 選択中のステップの音を消去
- **Ctrl+D**: 現在のパターンの現在のトラックをクリア
- **Ctrl+C**: パターンをコピー

#### ソング編集モード
- **矢印キー（左右）**: ソング位置選択
- **Enterキー**: パターン追加
- **DEL/Backspace**: パターン削除
- **Ctrl+D**: ソングクリア

#### トラック設定モード
- **矢印キー（上下）**: 音量調整

### ゲームパッド操作

#### 共通操作
- **STARTボタン**: モード切り替え
- **START+SELECTボタン同時押し**: アプリケーション終了
- **Aボタン**: 再生/停止の切り替え
- **L/Rトリガー**: トラック切り替え
- **右スティック左右**: テンポ変更
- **右スティック上下**: パターン切り替え
- **Yボタン**: ソングモード切り替え

#### パターン編集モード
- **十字キー（左右）** または **左スティック左右**: ステップ選択
- **十字キー（上下）**: 音階選択
- **L/Rショルダーボタン**: オクターブ変更
- **Bボタン**: 選択中の音階を入力
- **BACKボタン**: 選択中のステップの音を消去
- **GUIDE+BACKボタン同時押し**: 現在のパターンの現在のトラックをクリア

#### ソング編集モード
- **十字キー（左右）**: ソング位置選択
- **Bボタン**: パターン追加
- **Xボタン**: パターン削除

#### トラック設定モード
- **十字キー（上下）**: 音量調整

## 画面説明

- 上部: タイトル、モード、パターン番号、トラック番号
- 中央: 16ステップ×12音階のシーケンサーグリッド（4トラック）
  - パターン編集モード: シーケンサーグリッド
  - ソング編集モード: ソングシーケンス
  - トラック設定モード: トラック設定
- 下部: 再生状態、選択中のステップ、オクターブ、テンポ、トラック情報

## 開発情報

- 開発言語: Python
- 使用ライブラリ: Pyxel
- 対応OS: Windows, macOS, Linux
- 対応実機: Powkiddy RGB30など（plumOS-RN対応）

## ライセンス

MITライセンス
